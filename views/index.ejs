<<%- include("partials/header") %>

<h1>Mini Blog</h1>

<form action="/posts" method="POST" class="new-post-form">
  <input type="text" name="author" placeholder="Your name" required>
  <input type="text" name="title" placeholder="Post title" required>
  <textarea name="content" placeholder="Write your post..." required></textarea>
  <button type="submit">Create Post</button>
</form>

<hr>

<h2>All Posts</h2>
<% if (posts.length === 0) { %>
  <p>No posts yet. Be the first!</p>
<% } %>
<ul>
  <% posts.forEach(post => { %>
    <li>
      <h3><%= post.title %></h3>
      <p><%= post.content %></p>
      <small>By <%= post.author %> on <%= post.createdAt %></small>
      <br>
      <a href="/posts/<%= post.id %>/edit">Edit</a>
      <form action="/posts/<%= post.id %>?_method=DELETE" method="POST" style="display:inline;">
        <button type="submit">Delete</button>
      </form>
    </li>
  <% }) %>
</ul>

<%- include("partials/footer") %>
